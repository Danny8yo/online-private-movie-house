# **用例描述——配置房间**

## 1.	简略描述
                    该用例描述了管理员管理房间里的用户以及普通用户的权限，包括了（踢出用户， 限制或解除某个用户发言， 管理聊天状态），对观众的操作仅限于管理员从而保证了管理却又不冲突。

## 2.   参与者
- 房间管理员

## 3.	前置条件
●	 房间管理员需要正确设置好用户名。  
●	 用户必须具有房间管理员的身份。  
●	 软件和服务器之间的网络连接必须是有效的。  

## 4.	基本流   
{进入房间并且具有管理员身份}  
1.当用户进入房间后，并且房主把观众提升为管理员。 
{管理在房间的用户}  
2.踢出用户：执行子流{确定是否为管理员身份}，身份验证后便可执行操作。  
{管理房间聊天的限制}  
3.限制或解除某个用户发言：执行子流{管理用户发言权}   
4.管理聊天状态： 执行子流{管理全局聊天状态}  

  

## 5.	备选流
### 5.1	房间已解散
用户执行操作时，房间已被房主解散，房间状态会实时同步给所有成员。  
1.	管理员点击某个管理操作按钮。  
2.	系统检测到房间状态为 “已解散”。  
3.	系统弹出提示信息：“该房间已被解散，操作无法执行。”。  
4.	管理员点击 “确定”后退出房间。  
  
### 5.2	目标用户不存在或已离开房间
基本流步骤 2（踢出用户）、3（限制发言）中，用户选择的目标用户已不在房间内，但是成员列表可能未实时刷新，或用户操作时有延迟，则  
1.	系统发现目标用户不存在或已离开，弹出提示：目标用户已离开房间。  
2.	管理员点击 “确定”。  
3.	管理员可以刷新成员列表后重新尝试操作。  

### 5.3	网络异常
在基本流步骤 2-4 中，任何需要与系统交互的操作都可能因网络问题而失败。若网络不稳定或断开，则  
1.	管理员执行某个操作（如踢出用户、设置聊天状态）。  
2.	系统尝试向服务器发送请求，但网络请求超时或失败。  
3.	系统弹出提示信息：“网络异常，请检查您的网络连接后重试。”，并提供 “重试” 和 “取消” 按钮。  
4.	分支 A (用户选择重试)：用户点击 “重试”。  
系统重新执行该操作的网络请求。如果成功，则流程返回到基本流的原步骤继续执行；如果再次失败，则可能再次显示此备选流或提示 “操作失败”。  
5.	分支 B (用户选择取消)：用户点击 “取消”。  
操作被放弃。  


## 6.	子流
### 6.1	确定是否为管理员身份
a．系统判定：要求观众必须为管理员才可以显示操作的接口。  
b．系统判定：操作观众是否为普通用户。注意有些操作必须只能作用于普通用户，如踢出房间，管理员只能踢出普通用户，不能踢出管理员和房主。  


### 6.2	管理用户发言权
1.	管理员从列表中选择一个目标观众。  
2.	管理员选择操作：“限制发言” 或 “解除限制”。  
3.	系统执行操作：  
如果是 “限制发言”：系统将该用户加入 “禁言名单”，并记录禁言时间（如果是临时禁言）。  
如果是 “解除限制”：系统将该用户从 “禁言名单” 中移除。  
4.	系统更新房间成员列表界面，显示该用户的发言状态。  
5.	子流结束，返回到基本流的调用点。  
  

### 6.3	管理全局聊天状态
1.	管理员选择新的全局聊天状态。  
2.	系统保存新的全局聊天状态设置。  
3.	系统更新房间聊天区域的界面提示（例如：在聊天输入框上方显示 “当前仅管理员可发言”）。  
4.	子流结束，返回到基本流的调用点。  
 

## 7.	后置条件
●	房间基本信息已更新，如更改房间最大人数和权限。  
●	房间成员列表已更新。  
●	房间聊天限制已更新。  
 

## 8.	公共扩展
无。 

## 9.	特殊条件
无。 
