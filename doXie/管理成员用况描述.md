# **用例描述——管理成员**

## 1.	简略描述
该用例描述了房间管理员（非房主）通过系统执行成员管理操作的完整过程，包括踢出普通用户、限制 / 解除普通用户发言权限、管理全局聊天状态，确保管理员能规范房间成员行为、维护聊天秩序，且操作范围严格限定在管理员权限内（不可操作房主及其他管理员）。

## 2.   参与者
- 房间管理员

## 3.	前置条件
- 管理员已完成系统用户注册，用户名设置有效且已登录系统。  
- 操作用户已被房主提拔为目标房间的管理员，权限状态已同步至服务器。  
- 软件与服务器之间的网络连接稳定且有效，可支持实时数据交互。  
- 目标房间处于 “正常可用” 状态（未被解散、未被冻结）。  

## 4.	基本流   
{管理员身份验证通过}  
1.系统验证其管理员身份并加载管理操作接口，“管理成员” 用例启动。  
{管理普通用户}   
2.管理员在成员列表中选择目标普通用户，执行 “踢出用户” 操作：  
a. 系统弹出确认提示 “确认踢出该用户？踢出后其需重新申请加入”；  
b. 管理员点击 “确认”，系统向服务器发送踢出请求；  
c. 服务器执行踢出操作，同步更新房间成员列表，目标用户被强制退出房间。  
{管理发言权限}  
3.管理员选择 “管理发言权限” 选项，执行子流 “管理用户发言权限”，完成对指定普通用户的 “限制发言” 或 “解除限制” 操作。  
{管理全局聊天状态}  
4.管理员选择 “管理全局聊天” 选项，执行子流 “管理全局聊天状态”，设置房间全局聊天模式（如 “全员可发言”“仅管理员可发言”）。  
5.用例终止。  
  

## 5.	备选流
### 5.1	房间已解散
在基本流步骤 2-4 中，若管理员执行操作时，房间已被房主解散且状态同步至系统，则： 
1.	管理员点击任意管理操作按钮（如 “踢出用户”“限制发言”）；  
2.	系统检测到房间状态为 “已解散”，立即拦截操作；  
3.	系统弹出提示：“该房间已被解散，所有管理操作无法执行”；  
4.	管理员点击 “确定”，系统自动引导其退出房间，用例终止。  

  
### 5.2	目标用户不存在或已离开房间
在基本流步骤 2-4 中，任何需与服务器交互的操作（踢出用户、管理发言权限、设置全局聊天状态）因网络问题失败时：  
1.	管理员执行目标操作，系统向服务器发送请求； 
2.	系统检测到网络请求超时或连接中断；  
3.	系统弹出提示：“网络异常，请检查网络连接后重试”，提供 “重试” 和 “取消” 按钮；  
4.	分支 A（选择 “重试”）：管理员点击 “重试”，系统重新发送请求。若请求成功，流程返回到基本流原步骤继续执行；若连续 3 次重试失败，弹出 “操作失败，请稍后再试”，流程返回到操作前状态；  
5.	分支 B（选择 “取消”）：管理员点击 “取消”，当前操作被放弃，流程返回到基本流对应步骤的前一步。  
  

### 5.3	网络异常
在基本流步骤 2-4 中，任何需要与系统交互的操作都可能因网络问题而失败。若网络不稳定或断开，则  
1.	管理员执行某个操作（如踢出用户、设置聊天状态）。  
2.	系统尝试向服务器发送请求，但网络请求超时或失败。  
3.	系统弹出提示信息：“网络异常，请检查您的网络连接后重试。”，并提供 “重试” 和 “取消” 按钮。  
4.	分支 A (用户选择重试)：用户点击 “重试”。  
系统重新执行该操作的网络请求。如果成功，则流程返回到基本流的原步骤继续执行；如果再次失败，则可能再次显示此备选流或提示 “操作失败”。  
5.	分支 B (用户选择取消)：用户点击 “取消”。  
操作被放弃。  

### 5.4 操作对象为房主 / 其他管理员
在基本流步骤 2（踢出用户）、步骤 3（管理发言权限）中，若管理员误选择房主或其他管理员作为操作对象，则：  
1.	系统实时拦截操作，弹出提示：“无权限操作房主 / 其他管理员，请选择普通用户”。    
2.	管理员点击 “确定”，流程返回到成员列表选择界面，需重新选择普通用户作为操作对象。  


## 6.	子流
### 6.1	确定是否为管理员身份
1.	管理员进入房间时，系统发送身份校验请求，携带管理员用户 ID 及房间 ID；
2.	系统查询房间权限配置表，确认该用户是否为 “管理员” 身份； 
3.	若身份验证通过，系统加载 “管理成员” 操作接口（含 “踢出用户”“发言管理”“全局聊天设置” 按钮）；  
4.	若身份验证失败（如管理员权限被房主撤销），系统隐藏管理接口并弹出提示：“您已无管理员权限，无法执行管理操作”；  
5.	子流结束，验证通过则进入基本流步骤 2，验证失败则用例终止。  
 


### 6.2	管理用户发言权
1.	管理员从列表中选择一个目标观众。  
2.	管理员选择操作：“限制发言” 或 “解除限制”。  
3.	系统执行操作：  
如果是 “限制发言”：系统将该用户加入 “禁言名单”，并记录禁言时间（如果是临时禁言）。  
如果是 “解除限制”：系统将该用户从 “禁言名单” 中移除。  
4.	系统更新房间成员列表界面，显示该用户的发言状态。  
5.	子流结束，返回到基本流步骤 3 的调用点。  
  

### 6.3	管理全局聊天状态
1.	管理员选择新的全局聊天状态。  
2.	系统保存新的全局聊天状态设置。  
3.	系统更新房间聊天区域的界面提示（例如：在聊天输入框上方显示 “当前仅管理员可发言”）。  
4.	子流结束，返回到基本流步骤 4 的调用点。  
 

## 7.	后置条件
- 若执行了基本流步骤 2，目标普通用户已被踢出房间，房间成员列表已更新。  
- 若执行了子流 “管理用户发言权限”，目标普通用户的发言状态已更新（禁言 / 解除禁言）。  
- 若执行了子流 “管理全局聊天状态”，房间全局聊天模式已更新，所有成员客户端均显示对应状态提示。  
- 若触发备选流且操作未完成（如网络异常、操作对象错误），房间成员状态、聊天设置保持操作前的配置。  
 

## 8.	公共扩展
无。 

## 9.	特殊条件
无。 
