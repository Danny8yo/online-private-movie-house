# **用例描述——配置房间**

## 1.	简略描述
该用例描述了房主通过系统管理房间基础信息、配置房间权限、调整成员权限及解散房间的完整过程，确保房主能灵活管控房间配置，满足使用需求。

## 2.	参与者
- 房主

## 3.	前置条件
- 房主已完成系统用户注册并登录，用户名设置有效。  
- 房主已成功创建目标房间，房间处于正常可用状态。  
- 网络连接稳定且有效。  
- 房间创建及配置操作符合系统预设限制（如最大人数上限、密码格式规则等）。  
- 操作用户已被系统验证为目标房间的房主身份。  


## 4.	基本流   
{创建房间完成}  
当房主成功创建房间后，触发 “配置房间” 用例启动。  
{管理房间基本信息}  
房主选择 “设置最大人数” 选项，执行子流 “设置房间最大人数”，完成房间最大容纳人数配置。  
房主选择 “设置房间权限” 选项，执行子流 “设置房间权限”，完成房间公开状态及密码配置。  
{管理房间成员权限}  
房主在成员列表中选择目标用户，执行 “提拔为管理员” 操作，系统更新该用户权限为管理员。  
房主在管理员列表中选择目标用户，执行 “取消管理员身份” 操作，系统将该用户权限恢复为普通用户。  
{解散房间}  
房主选择 “解散房间” 选项，系统弹出确认提示 “确认解散当前房间？解散后所有房间信息将不可恢复”。  
房主确认解散操作，系统注销该房间，清理房间相关数据。  
用例终止。  


## 5.	备选流
### 5.1	目标用户不存在或已离开房间
基本流步骤4（提拔管理员）、5（取消管理员）中，房主选择的目标观众已不在房间内，但是成员列表可能未实时刷新，或用户操作时有延迟，则  
1.	系统发现目标用户不存在或已离开，弹出提示：目标观众已离开房间。  
2.	房主点击 “确定”。  
3.	房主可以刷新成员列表后重新尝试操作。  

### 5.2	网络异常
在基本流步骤 2-6 中，任何需要与系统交互的操作都可能因网络问题而失败。若网络不稳定或断开，则  
1.	房主执行某个操作（如设置最大人数、提拔管理员）。  
2.	系统尝试向服务器发送请求，但网络请求超时或失败。  
3.	系统弹出提示信息：“网络异常，请检查您的网络连接后重试。”，并提供 “重试” 和 “取消” 按钮。  
4.	分支 A (选择重试)：用户点击 “重试”。  
系统重新执行该操作的网络请求。如果成功，则流程返回到基本流的原步骤继续执行；如果再次失败，则可能再次显示此备选流或提示 “操作失败”。  
5.	分支 B (选择取消)：用户点击 “取消”。
操作被放弃。  

### 5.3 配置房间最大人数校验失败
在子流 “设置房间最大人数” 步骤 3-5 中，若输入的最大人数不符合系统规则，则：  
系统弹出对应提示（如 “最大人数需在 2-50 人之间”“新最大人数不能小于当前房间实际人数”）。  
房主点击 “确定”，流程返回到子流步骤 2，允许重新输入或选择最大人数。  

### 5.4 设置房间密码校验失败

在子流 “设置房间权限” 步骤 2 中，若输入的密码不符合系统规则，则：  
系统实时弹出校验提示（如 “密码需为 4-6 位数字”“密码不能为连续数字”“密码不能全为相同数字”）。  
房主根据提示修正密码，流程留在子流步骤 2，直至输入符合规则的密码。  


## 6.	子流
### 6.1	设置房间最大人数
1.	系统展示当前房间最大人数设置。  
2.	用户输入或选择新的最大人数。  
3.	系统校验输入的人数是否有效。  
4.	人数是否在系统允许的范围内。  
5.	新的最大人数是否大于当前房间内的实际人数（如果当前已有 5 人，不能设置最大人数为 3）。  
6.	若校验通过，系统保存新的最大人数设置。  
7.	系统更新房间信息界面，显示新的最大人数。  
8.	子流结束，返回到基本流的调用点。  

### 6.2	设置房间权限
1.	房主设置房间权限为不公开，系统在表单下方显示密码输入框，选择四位密码还是六位密码。  
2.	房主输入密码，系统实时校验（如 “密码不能为连续数字”、“密码不能全为相同数字”）。  
3.	房主确认密码后，系统再次问管理员是否确定，完成后便成功设置。  

### 6.3	确定是否为房主身份
a．系统判定：要求用户必须为房主才可以显示配置房间的接口。  
b．系统判定：操作用户是否为房主。如果为房主，则可以配置房间信息。注意房主只能配置房间的信息和权限，不可以管理片场和管理普通用户。  


## 7.	后置条件
- 若执行了基本流步骤 2-3，房间基本信息（最大人数、权限状态、密码）已更新并同步至服务器。  
- 若执行了基本流步骤 4-5，对应房间成员的权限已更新，系统记录权限变更日志。  
- 若执行了基本流步骤 6-7，房间已被成功解散，相关数据（成员信息、配置信息）已被系统清理。  
- 若触发备选流且操作未完成，房间原有配置信息保持不变。  


## 8.	公共扩展
无。 

## 9.	特殊条件
无。 
